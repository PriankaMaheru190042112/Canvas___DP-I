{% load static %}

<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin | Home</title>
    <link rel="stylesheet" type="text/css" href="{% static 'styles/admin_home_style.css' %} ">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
    <script src=
    "https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js">
        </script>  </head>
  <body>

    <header>
      <a href="#" class="brand">Canvas</a>
      <div class="menu">
        <div class="btn">
          <i class="fas fa-times close-btn"></i>
        </div>
        <a href="/Admin/Admin_home" class="active">Home</a>
        <a href="/Admin/Admin_profile">Profile</a>
        <a href="{% url 'Admin:Admin_logout' %}">Logout</a>
      </div>
      <div class="btn">
        <i class="fas fa-bars menu-btn"></i>
      </div>
    </header>

      
    <section id = "filter_events">
      <div class = "title-text">
        <br> 
        <br> 
        <br> 
        <br> 
        {% if user.is_authenticated%}
        <div>  <h2> Welcome {{request.user.username}}! </h2>  </div>
        <br><br><br>
          
          {% for object in objects %}
          <div>
          {{object.org}} has requested for <a href={{object.get_absolute_url4}}>{{object.name}} </a> 

          <form action="/Admin/Admin_home/" method="POST"> {% csrf_token %}

            <div id="acc_rej{{object.event_id}}" >
            
            <input type="hidden" name="eid" id="eid" value= "{{object.event_id}}"> 

            <div> <button type="submit" class="btn btn-primary" name="ac" id="ac{{object.event_id}}" onclick="setLocation('/Admin/Admin_home')"> Accept </button>
    
           <button type="submit" class="btn btn-danger" name="rj" id="rj"> Reject </button></div>
            </div> 
            </form>
            <div>
          </div>

          {% endfor %}
        {% endif %}  
      </div>   
       
  </section> 


    <script type="text/javascript">
    //javascript for navigation bar effect on scroll
    window.addEventListener("scroll", function(){
      var header = document.querySelector("header");
      header.classList.toggle('sticky', window.scrollY > 0);
    });

    //javascript for responsive navigation sidebar menu
    var menu = document.querySelector('.menu');
    var menuBtn = document.querySelector('.menu-btn');
    var closeBtn = document.querySelector('.close-btn');

    menuBtn.addEventListener("click", () => {
      menu.classList.add('active');
    });

    closeBtn.addEventListener("click", () => {
      menu.classList.remove('active');
    });
    </script>
 
    <script>

    

     {% for object in objects %}
     
     console.log({{object.event_id}})
     {% comment %} var acc = document.querySelector("#ac"+{{object.event_id}});
     console.log(acc)
     
     acc.addEventListener("click", function() {
     acc_rej= document.querySelector("#acc_rej"+{{object.event_id}})
     console.log(acc_rej)
      acc_rej.style.display= none;
      console.log("clicked")
      this.style.display= 'none'
    }); {% endcomment %}


    function setLocation(loc) {
      document.getElementById('acc_rej'+object.event_id).style.display = 'none';
      window.location = loc;
    }


     {% endfor %}

    </script>

  </body>
</html>
